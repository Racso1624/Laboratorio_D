from token_definition import *
from scanner_simulator import *

class AFD(object):
    def __init__(self):
        self.regex = ['(', '(', 32, '|', 9, '|', 10, ')', '+', ')', '#ws', '|', '(', 42, ')', '#characters', '|', 47, 42, '#/*', '|', 42, 47, '#*/', '|', 37, 116, 111, 107, 101, 110, '#%token', '|', 124, '#|', '|', 73, 71, 78, 79, 82, 69, '#IGNORE', '|', '(', '(', 97, '|', 98, '|', 99, '|', 100, '|', 101, '|', 102, '|', 103, '|', 104, '|', 105, '|', 106, '|', 107, '|', 108, '|', 109, '|', 110, '|', 111, '|', 112, '|', 113, '|', 114, '|', 115, '|', 116, '|', 117, '|', 118, '|', 119, '|', 120, '|', 121, '|', 122, ')', '*', ')', '#minusword', '|', '(', '(', 65, '|', 66, '|', 67, '|', 68, '|', 69, '|', 70, '|', 71, '|', 72, '|', 73, '|', 74, '|', 75, '|', 76, '|', 77, '|', 78, '|', 79, '|', 80, '|', 81, '|', 82, '|', 83, '|', 84, '|', 85, '|', 86, '|', 87, '|', 88, '|', 89, '|', 90, ')', '*', ')', '#mayusword', '|', 37, 37, '#%%', '|', 58, '#:', '|', 59, '#;']
        self.states = ['S0', 'S1', 'S2', 'S3', 'S4', 'S5', 'S6', 'S7', 'S8', 'S9', 'S10', 'S11', 'S12', 'S13', 'S14', 'S15', 'S16', 'S17', 'S18', 'S19', 'S20', 'S21', 'S22', 'S23']
        self.transitions = [['S0', 32, 'S1'], ['S0', 9, 'S1'], ['S0', 10, 'S1'], ['S0', 42, 'S2'], ['S0', 47, 'S3'], ['S0', 37, 'S4'], ['S0', 116, 'S5'], ['S0', 111, 'S5'], ['S0', 107, 'S5'], ['S0', 101, 'S5'], ['S0', 110, 'S5'], ['S0', 124, 'S6'], ['S0', 73, 'S7'], ['S0', 71, 'S8'], ['S0', 78, 'S8'], ['S0', 79, 'S8'], ['S0', 82, 'S8'], ['S0', 69, 'S8'], ['S0', 97, 'S5'], ['S0', 98, 'S5'], ['S0', 99, 'S5'], ['S0', 100, 'S5'], ['S0', 102, 'S5'], ['S0', 103, 'S5'], ['S0', 104, 'S5'], ['S0', 105, 'S5'], ['S0', 106, 'S5'], ['S0', 108, 'S5'], ['S0', 109, 'S5'], ['S0', 112, 'S5'], ['S0', 113, 'S5'], ['S0', 114, 'S5'], ['S0', 115, 'S5'], ['S0', 117, 'S5'], ['S0', 118, 'S5'], ['S0', 119, 'S5'], ['S0', 120, 'S5'], ['S0', 121, 'S5'], ['S0', 122, 'S5'], ['S0', 65, 'S8'], ['S0', 66, 'S8'], ['S0', 67, 'S8'], ['S0', 68, 'S8'], ['S0', 70, 'S8'], ['S0', 72, 'S8'], ['S0', 74, 'S8'], ['S0', 75, 'S8'], ['S0', 76, 'S8'], ['S0', 77, 'S8'], ['S0', 80, 'S8'], ['S0', 81, 'S8'], ['S0', 83, 'S8'], ['S0', 84, 'S8'], ['S0', 85, 'S8'], ['S0', 86, 'S8'], ['S0', 87, 'S8'], ['S0', 88, 'S8'], ['S0', 89, 'S8'], ['S0', 90, 'S8'], ['S0', 58, 'S9'], ['S0', 59, 'S10'], ['S1', 32, 'S1'], ['S1', 9, 'S1'], ['S1', 10, 'S1'], ['S2', 47, 'S11'], ['S3', 42, 'S12'], ['S4', 37, 'S13'], ['S4', 116, 'S14'], ['S5', 116, 'S5'], ['S5', 111, 'S5'], ['S5', 107, 'S5'], ['S5', 101, 'S5'], ['S5', 110, 'S5'], ['S5', 97, 'S5'], ['S5', 98, 'S5'], ['S5', 99, 'S5'], ['S5', 100, 'S5'], ['S5', 102, 'S5'], ['S5', 103, 'S5'], ['S5', 104, 'S5'], ['S5', 105, 'S5'], ['S5', 106, 'S5'], ['S5', 108, 'S5'], ['S5', 109, 'S5'], ['S5', 112, 'S5'], ['S5', 113, 'S5'], ['S5', 114, 'S5'], ['S5', 115, 'S5'], ['S5', 117, 'S5'], ['S5', 118, 'S5'], ['S5', 119, 'S5'], ['S5', 120, 'S5'], ['S5', 121, 'S5'], ['S5', 122, 'S5'], ['S7', 73, 'S8'], ['S7', 71, 'S15'], ['S7', 78, 'S8'], ['S7', 79, 'S8'], ['S7', 82, 'S8'], ['S7', 69, 'S8'], ['S7', 65, 'S8'], ['S7', 66, 'S8'], ['S7', 67, 'S8'], ['S7', 68, 'S8'], ['S7', 70, 'S8'], ['S7', 72, 'S8'], ['S7', 74, 'S8'], ['S7', 75, 'S8'], ['S7', 76, 'S8'], ['S7', 77, 'S8'], ['S7', 80, 'S8'], ['S7', 81, 'S8'], ['S7', 83, 'S8'], ['S7', 84, 'S8'], ['S7', 85, 'S8'], ['S7', 86, 'S8'], ['S7', 87, 'S8'], ['S7', 88, 'S8'], ['S7', 89, 'S8'], ['S7', 90, 'S8'], ['S8', 73, 'S8'], ['S8', 71, 'S8'], ['S8', 78, 'S8'], ['S8', 79, 'S8'], ['S8', 82, 'S8'], ['S8', 69, 'S8'], ['S8', 65, 'S8'], ['S8', 66, 'S8'], ['S8', 67, 'S8'], ['S8', 68, 'S8'], ['S8', 70, 'S8'], ['S8', 72, 'S8'], ['S8', 74, 'S8'], ['S8', 75, 'S8'], ['S8', 76, 'S8'], ['S8', 77, 'S8'], ['S8', 80, 'S8'], ['S8', 81, 'S8'], ['S8', 83, 'S8'], ['S8', 84, 'S8'], ['S8', 85, 'S8'], ['S8', 86, 'S8'], ['S8', 87, 'S8'], ['S8', 88, 'S8'], ['S8', 89, 'S8'], ['S8', 90, 'S8'], ['S14', 111, 'S16'], ['S15', 73, 'S8'], ['S15', 71, 'S8'], ['S15', 78, 'S17'], ['S15', 79, 'S8'], ['S15', 82, 'S8'], ['S15', 69, 'S8'], ['S15', 65, 'S8'], ['S15', 66, 'S8'], ['S15', 67, 'S8'], ['S15', 68, 'S8'], ['S15', 70, 'S8'], ['S15', 72, 'S8'], ['S15', 74, 'S8'], ['S15', 75, 'S8'], ['S15', 76, 'S8'], ['S15', 77, 'S8'], ['S15', 80, 'S8'], ['S15', 81, 'S8'], ['S15', 83, 'S8'], ['S15', 84, 'S8'], ['S15', 85, 'S8'], ['S15', 86, 'S8'], ['S15', 87, 'S8'], ['S15', 88, 'S8'], ['S15', 89, 'S8'], ['S15', 90, 'S8'], ['S16', 107, 'S18'], ['S17', 73, 'S8'], ['S17', 71, 'S8'], ['S17', 78, 'S8'], ['S17', 79, 'S19'], ['S17', 82, 'S8'], ['S17', 69, 'S8'], ['S17', 65, 'S8'], ['S17', 66, 'S8'], ['S17', 67, 'S8'], ['S17', 68, 'S8'], ['S17', 70, 'S8'], ['S17', 72, 'S8'], ['S17', 74, 'S8'], ['S17', 75, 'S8'], ['S17', 76, 'S8'], ['S17', 77, 'S8'], ['S17', 80, 'S8'], ['S17', 81, 'S8'], ['S17', 83, 'S8'], ['S17', 84, 'S8'], ['S17', 85, 'S8'], ['S17', 86, 'S8'], ['S17', 87, 'S8'], ['S17', 88, 'S8'], ['S17', 89, 'S8'], ['S17', 90, 'S8'], ['S18', 101, 'S20'], ['S19', 73, 'S8'], ['S19', 71, 'S8'], ['S19', 78, 'S8'], ['S19', 79, 'S8'], ['S19', 82, 'S21'], ['S19', 69, 'S8'], ['S19', 65, 'S8'], ['S19', 66, 'S8'], ['S19', 67, 'S8'], ['S19', 68, 'S8'], ['S19', 70, 'S8'], ['S19', 72, 'S8'], ['S19', 74, 'S8'], ['S19', 75, 'S8'], ['S19', 76, 'S8'], ['S19', 77, 'S8'], ['S19', 80, 'S8'], ['S19', 81, 'S8'], ['S19', 83, 'S8'], ['S19', 84, 'S8'], ['S19', 85, 'S8'], ['S19', 86, 'S8'], ['S19', 87, 'S8'], ['S19', 88, 'S8'], ['S19', 89, 'S8'], ['S19', 90, 'S8'], ['S20', 110, 'S22'], ['S21', 73, 'S8'], ['S21', 71, 'S8'], ['S21', 78, 'S8'], ['S21', 79, 'S8'], ['S21', 82, 'S8'], ['S21', 69, 'S23'], ['S21', 65, 'S8'], ['S21', 66, 'S8'], ['S21', 67, 'S8'], ['S21', 68, 'S8'], ['S21', 70, 'S8'], ['S21', 72, 'S8'], ['S21', 74, 'S8'], ['S21', 75, 'S8'], ['S21', 76, 'S8'], ['S21', 77, 'S8'], ['S21', 80, 'S8'], ['S21', 81, 'S8'], ['S21', 83, 'S8'], ['S21', 84, 'S8'], ['S21', 85, 'S8'], ['S21', 86, 'S8'], ['S21', 87, 'S8'], ['S21', 88, 'S8'], ['S21', 89, 'S8'], ['S21', 90, 'S8'], ['S23', 73, 'S8'], ['S23', 71, 'S8'], ['S23', 78, 'S8'], ['S23', 79, 'S8'], ['S23', 82, 'S8'], ['S23', 69, 'S8'], ['S23', 65, 'S8'], ['S23', 66, 'S8'], ['S23', 67, 'S8'], ['S23', 68, 'S8'], ['S23', 70, 'S8'], ['S23', 72, 'S8'], ['S23', 74, 'S8'], ['S23', 75, 'S8'], ['S23', 76, 'S8'], ['S23', 77, 'S8'], ['S23', 80, 'S8'], ['S23', 81, 'S8'], ['S23', 83, 'S8'], ['S23', 84, 'S8'], ['S23', 85, 'S8'], ['S23', 86, 'S8'], ['S23', 87, 'S8'], ['S23', 88, 'S8'], ['S23', 89, 'S8'], ['S23', 90, 'S8']]
        self.initial_state = 'S0'
        self.final_states = {'S0': '#mayusword', 'S1': '#ws', 'S2': '#characters', 'S5': '#minusword', 'S6': '#|', 'S7': '#mayusword', 'S8': '#mayusword', 'S9': '#:', 'S10': '#;', 'S11': '#*/', 'S12': '#/*', 'S13': '#%%', 'S15': '#mayusword', 'S17': '#mayusword', 'S19': '#mayusword', 'S21': '#mayusword', 'S22': '#%token', 'S23': '#IGNORE'}
        self.symbols = [32, 9, 10, '#ws', 42, '#characters', 47, '#/*', '#*/', 37, 116, 111, 107, 101, 110, '#%token', 124, '#|', 73, 71, 78, 79, 82, 69, '#IGNORE', 97, 98, 99, 100, 102, 103, 104, 105, 106, 108, 109, 112, 113, 114, 115, 117, 118, 119, 120, 121, 122, '#minusword', 65, 66, 67, 68, 70, 72, 74, 75, 76, 77, 80, 81, 83, 84, 85, 86, 87, 88, 89, 90, '#mayusword', '#%%', 58, '#:', 59, '#;']

def tokenScanner(token):
	if(token == '#ws'):
		return WHITESPACE
	if(token == '#characters'):
		return CHARACTERS
	if(token == '#/*'):
		return LEFTCOMMENT
	if(token == '#*/'):
		return RIGHTCOMMENT
	if(token == '#%token'):
		return TOKEN
	if(token == '#|'):
		return OR
	if(token == '#IGNORE'):
		return IGNORE
	if(token == '#minusword'):
		return WORDMIN
	if(token == '#mayusword'):
		return WORDMAY
	if(token == '#%%'):
		return SPLIT
	if(token == '#:'):
		return TWOPOINTS
	if(token == '#;'):
		return FINISHDECLARATION

	return ERROR

afd = AFD()
simulation('./tests/slr-1.yalp', tokenScanner, afd)